name: Build
on: push

jobs:
  build:
    runs-on: ubuntu-22.04
    container:
      image: carlonluca/qt-builder:jammy
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          submodules: recursive
      - name: Build
        shell: bash
        run: |
          wget --no-check-certificate "https://download.qt.io/official_releases/qt/6.4/6.4.2/single/qt-everywhere-src-6.4.2.tar.xz"
          tar xfp qt-everywhere-src-6.4.2.tar.xz
          mkdir build
          cd build
          ../qt-everywhere-src-6.4.2/configure -opensource \
            -confirm-license -release -nomake tests \
            -nomake examples -qt-zlib -qt-libjpeg \
            -qt-libpng -xcb -qt-freetype -qt-pcre \
            -qt-harfbuzz -prefix /opt/Qt-amd64-6.4.2 \
            -pkg-config